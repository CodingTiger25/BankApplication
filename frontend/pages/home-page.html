<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <title>Title</title>
</head>
<script>

    let user;
    let user_checking;
    let user_saving;

    function main(){
        let token = 'Bearer ' + sessionStorage.getItem('token');
        //sessionStorage.clear();
        //console.log("TOKEN: " + token)
        //console.log("Token: " + token)

        fetch('http://localhost:8080/user/', {
            method: 'GET',
            withCredentials: true,
            headers: {
                accept: 'application/json',
                Authorization: token,
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*',
                'Access-Control-Allow-Credentials': true
            },

            }).then(res => res.json())
            .then(data => {
                user = data.username;
                user_checking = data.checking_amount;
                user_saving = data.saving_amount;
            })
            .then(() => document.getElementById("User_name").innerHTML = user,
            )
            .then(() => document.getElementById("checking").innerHTML = user_checking,
                )
            .then(() => document.getElementById("saving").innerHTML = user_saving)
    }

    function userInfo()
    {
        document.getElementById("User_name").innerHTML = user;
    }


</script>
<script>
    function home(){
        window.location.replace("../index.html");
    }
</script>

<body>
    <header>
        <h1>
            Bank Application
        </h1>
        <script>main()</script>


        <div>
            <p id="User_name">

            </p>
        </div>

        <div>
            <p id="checking">

            </p>

        </div>

        <div>
            <p id="saving">

            </p>

        </div>


        <button onclick="home()">Home</button>
    </header>
</body>
</html>